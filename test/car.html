%3C%21DOCTYPE%20html%3E%0A%3Chtml%3E%0A%3Chead%3E%A0%0A%3Cmeta%A0charset%3D%22utf-8%22%3E%A0%0A%3Ctitle%3E%u83DC%u9E1F%u6559%u7A0B%28runoob.com%29%3C/title%3E%A0%0A%3C/head%3E%0A%3Cbody%3E%0A%3Cp%20id%3D%22demo%22%3E%u70B9%u51FB%u6309%u94AE%u83B7%u53D6%u60A8%u5F53%u524D%u5750%u6807%uFF08%u53EF%u80FD%u9700%u8981%u6BD4%u8F83%u957F%u7684%u65F6%u95F4%u83B7%u53D6%uFF09%uFF1A%3C/p%3E%0A%3Cbutton%20onclick%3D%22getLocation%28%29%22%3E%u70B9%u6211%3C/button%3E%0A%3Cscript%3E%0Avar%20x%3Ddocument.getElementById%28%22demo%22%29%3B%0Afunction%20getLocation%28%29%0A%7B%0A%09if%20%28navigator.geolocation%29%0A%09%7B%0A%09%09navigator.geolocation.watchPosition%28showPosition%2CshowError%29%3B%0A%09%7D%0A%09else%0A%09%7B%0A%09%09x.innerHTML%3D%22%u8BE5%u6D4F%u89C8%u5668%u4E0D%u652F%u6301%u83B7%u53D6%u5730%u7406%u4F4D%u7F6E%u3002%22%3B%0A%09%7D%0A%7D%0Afunction%20showPosition%28position%29%0A%7B%0A%09console.log%28position%29%3B%0A%09var%20a%20%3D%20wgs84togcj02%28position.coords.longitude%2Cposition.coords.latitude%29%3B%0A%09x.innerHTML%3D%22%u7EAC%u5EA6%3A%20%22%20+%20position.coords.latitude%20+%20%0A%09%22%3Cbr%3E%u7ECF%u5EA6%3A%20%22%20+%20position.coords.longitude%20+%20%22%3Cbr%3E%u6D77%u62D4%uFF1A%22%20+%20position.coords.altitude%20+%20%20%22%3Cbr%3E%u5B9A%u4F4D%u7CBE%u5EA6%2C%u6D77%u62D4%u7CBE%u5EA6%22%20+%20position.coords.accuracy%20+%20%22%2C%22%20+%20position.coords.altitudeAccuracy%20+%20%22%3Ciframe%20src%3Dhttps%3A//m.amap.com/navi/%3Fdest%3D%22%20+%20a%5B0%5D%20+%20%22%2C%22%20+%20a%5B1%5D%20+%20%22%26destName%3D%u6211%u7684%u4F4D%u7F6E%26key%3D35e11af6eb37558f0d1f2480ebbecd6d%20height%3D960px%20width%3D1200px%3E%3C/iframe%3E%22%3B%09%0A%7D%0Afunction%20showError%28error%29%0A%7B%0A%09switch%28error.code%29%20%0A%09%7B%0A%09%09case%20error.PERMISSION_DENIED%3A%0A%09%09%09x.innerHTML%3D%22%u7528%u6237%u62D2%u7EDD%u5BF9%u83B7%u53D6%u5730%u7406%u4F4D%u7F6E%u7684%u8BF7%u6C42%u3002%22%0A%09%09%09break%3B%0A%09%09case%20error.POSITION_UNAVAILABLE%3A%0A%09%09%09x.innerHTML%3D%22%u4F4D%u7F6E%u4FE1%u606F%u662F%u4E0D%u53EF%u7528%u7684%u3002%22%0A%09%09%09break%3B%0A%09%09case%20error.TIMEOUT%3A%0A%09%09%09x.innerHTML%3D%22%u8BF7%u6C42%u7528%u6237%u5730%u7406%u4F4D%u7F6E%u8D85%u65F6%u3002%22%0A%09%09%09break%3B%0A%09%09case%20error.UNKNOWN_ERROR%3A%0A%09%09%09x.innerHTML%3D%22%u672A%u77E5%u9519%u8BEF%u3002%22%0A%09%09%09break%3B%0A%09%7D%0A%7D%0A%3C/script%3E%0A%3C/body%3E%0A%3C/html%3E%0A%0A%0A%0A%0A%0A%3Cscript%3E%0A%0A/**%0Ahttps%3A//github.com/wandergis/coordtransform/blob/master/index.js%0A%20*%20Created%20by%20Wandergis%20on%202015/7/8.%0A%20*%20%u63D0%u4F9B%u4E86%u767E%u5EA6%u5750%u6807%uFF08BD09%uFF09%u3001%u56FD%u6D4B%u5C40%u5750%u6807%uFF08%u706B%u661F%u5750%u6807%uFF0CGCJ02%uFF09%u3001%u548CWGS84%u5750%u6807%u7CFB%u4E4B%u95F4%u7684%u8F6C%u6362%0A%20*/%0A//UMD%u9B54%u6CD5%u4EE3%u7801%0A//%20if%20the%20module%20has%20no%20dependencies%2C%20the%20above%20pattern%20can%20be%20simplified%20to%0A%28function%20%28root%2C%20factory%29%20%7B%0A%20%20if%20%28typeof%20define%20%3D%3D%3D%20%27function%27%20%26%26%20define.amd%29%20%7B%0A%20%20%20%20//%20AMD.%20Register%20as%20an%20anonymous%20module.%0A%20%20%20%20define%28%5B%5D%2C%20factory%29%3B%0A%20%20%7D%20else%20if%20%28typeof%20module%20%3D%3D%3D%20%27object%27%20%26%26%20module.exports%29%20%7B%0A%20%20%20%20//%20Node.%20Does%20not%20work%20with%20strict%20CommonJS%2C%20but%0A%20%20%20%20//%20only%20CommonJS-like%20environments%20that%20support%20module.exports%2C%0A%20%20%20%20//%20like%20Node.%0A%20%20%20%20module.exports%20%3D%20factory%28%29%3B%0A%20%20%7D%20else%20%7B%0A%20%20%20%20//%20Browser%20globals%20%28root%20is%20window%29%0A%20%20%20%20root.coordtransform%20%3D%20factory%28%29%3B%0A%20%20%7D%0A%7D%28this%2C%20function%20%28%29%20%7B%0A%20%20//%u5B9A%u4E49%u4E00%u4E9B%u5E38%u91CF%0A%20%20var%20x_PI%20%3D%203.14159265358979324%20*%203000.0%20/%20180.0%3B%0A%20%20var%20PI%20%3D%203.1415926535897932384626%3B%0A%20%20var%20a%20%3D%206378245.0%3B%0A%20%20var%20ee%20%3D%200.00669342162296594323%3B%0A%20%20/**%0A%20%20%20*%20%u767E%u5EA6%u5750%u6807%u7CFB%20%28BD-09%29%20%u4E0E%20%u706B%u661F%u5750%u6807%u7CFB%20%28GCJ-02%29%u7684%u8F6C%u6362%0A%20%20%20*%20%u5373%20%u767E%u5EA6%20%u8F6C%20%u8C37%u6B4C%u3001%u9AD8%u5FB7%0A%20%20%20*%20@param%20bd_lon%0A%20%20%20*%20@param%20bd_lat%0A%20%20%20*%20@returns%20%7B*%5B%5D%7D%0A%20%20%20*/%0A%20%20var%20bd09togcj02%20%3D%20function%20bd09togcj02%28bd_lon%2C%20bd_lat%29%20%7B%0A%20%20%20%20var%20bd_lon%20%3D%20+bd_lon%3B%0A%20%20%20%20var%20bd_lat%20%3D%20+bd_lat%3B%0A%20%20%20%20var%20x%20%3D%20bd_lon%20-%200.0065%3B%0A%20%20%20%20var%20y%20%3D%20bd_lat%20-%200.006%3B%0A%20%20%20%20var%20z%20%3D%20Math.sqrt%28x%20*%20x%20+%20y%20*%20y%29%20-%200.00002%20*%20Math.sin%28y%20*%20x_PI%29%3B%0A%20%20%20%20var%20theta%20%3D%20Math.atan2%28y%2C%20x%29%20-%200.000003%20*%20Math.cos%28x%20*%20x_PI%29%3B%0A%20%20%20%20var%20gg_lng%20%3D%20z%20*%20Math.cos%28theta%29%3B%0A%20%20%20%20var%20gg_lat%20%3D%20z%20*%20Math.sin%28theta%29%3B%0A%20%20%20%20return%20%5Bgg_lng%2C%20gg_lat%5D%0A%20%20%7D%3B%0A%0A%20%20/**%0A%20%20%20*%20%u706B%u661F%u5750%u6807%u7CFB%20%28GCJ-02%29%20%u4E0E%u767E%u5EA6%u5750%u6807%u7CFB%20%28BD-09%29%20%u7684%u8F6C%u6362%0A%20%20%20*%20%u5373%u8C37%u6B4C%u3001%u9AD8%u5FB7%20%u8F6C%20%u767E%u5EA6%0A%20%20%20*%20@param%20lng%0A%20%20%20*%20@param%20lat%0A%20%20%20*%20@returns%20%7B*%5B%5D%7D%0A%20%20%20*/%0A%20%20var%20gcj02tobd09%20%3D%20function%20gcj02tobd09%28lng%2C%20lat%29%20%7B%0A%20%20%20%20var%20lat%20%3D%20+lat%3B%0A%20%20%20%20var%20lng%20%3D%20+lng%3B%0A%20%20%20%20var%20z%20%3D%20Math.sqrt%28lng%20*%20lng%20+%20lat%20*%20lat%29%20+%200.00002%20*%20Math.sin%28lat%20*%20x_PI%29%3B%0A%20%20%20%20var%20theta%20%3D%20Math.atan2%28lat%2C%20lng%29%20+%200.000003%20*%20Math.cos%28lng%20*%20x_PI%29%3B%0A%20%20%20%20var%20bd_lng%20%3D%20z%20*%20Math.cos%28theta%29%20+%200.0065%3B%0A%20%20%20%20var%20bd_lat%20%3D%20z%20*%20Math.sin%28theta%29%20+%200.006%3B%0A%20%20%20%20return%20%5Bbd_lng%2C%20bd_lat%5D%0A%20%20%7D%3B%0A%0A%20%20/**%0A%20%20%20*%20WGS84%u8F6CGCj02%0A%20%20%20*%20@param%20lng%0A%20%20%20*%20@param%20lat%0A%20%20%20*%20@returns%20%7B*%5B%5D%7D%0A%20%20%20*/%0A%20%20var%20wgs84togcj02%20%3D%20function%20wgs84togcj02%28lng%2C%20lat%29%20%7B%0A%20%20%20%20var%20lat%20%3D%20+lat%3B%0A%20%20%20%20var%20lng%20%3D%20+lng%3B%0A%20%20%20%20if%20%28out_of_china%28lng%2C%20lat%29%29%20%7B%0A%20%20%20%20%20%20return%20%5Blng%2C%20lat%5D%0A%20%20%20%20%7D%20else%20%7B%0A%20%20%20%20%20%20var%20dlat%20%3D%20transformlat%28lng%20-%20105.0%2C%20lat%20-%2035.0%29%3B%0A%20%20%20%20%20%20var%20dlng%20%3D%20transformlng%28lng%20-%20105.0%2C%20lat%20-%2035.0%29%3B%0A%20%20%20%20%20%20var%20radlat%20%3D%20lat%20/%20180.0%20*%20PI%3B%0A%20%20%20%20%20%20var%20magic%20%3D%20Math.sin%28radlat%29%3B%0A%20%20%20%20%20%20magic%20%3D%201%20-%20ee%20*%20magic%20*%20magic%3B%0A%20%20%20%20%20%20var%20sqrtmagic%20%3D%20Math.sqrt%28magic%29%3B%0A%20%20%20%20%20%20dlat%20%3D%20%28dlat%20*%20180.0%29%20/%20%28%28a%20*%20%281%20-%20ee%29%29%20/%20%28magic%20*%20sqrtmagic%29%20*%20PI%29%3B%0A%20%20%20%20%20%20dlng%20%3D%20%28dlng%20*%20180.0%29%20/%20%28a%20/%20sqrtmagic%20*%20Math.cos%28radlat%29%20*%20PI%29%3B%0A%20%20%20%20%20%20var%20mglat%20%3D%20lat%20+%20dlat%3B%0A%20%20%20%20%20%20var%20mglng%20%3D%20lng%20+%20dlng%3B%0A%20%20%20%20%20%20return%20%5Bmglng%2C%20mglat%5D%0A%20%20%20%20%7D%0A%20%20%7D%3B%0A%0A%20%20/**%0A%20%20%20*%20GCJ02%20%u8F6C%u6362%u4E3A%20WGS84%0A%20%20%20*%20@param%20lng%0A%20%20%20*%20@param%20lat%0A%20%20%20*%20@returns%20%7B*%5B%5D%7D%0A%20%20%20*/%0A%20%20var%20gcj02towgs84%20%3D%20function%20gcj02towgs84%28lng%2C%20lat%29%20%7B%0A%20%20%20%20var%20lat%20%3D%20+lat%3B%0A%20%20%20%20var%20lng%20%3D%20+lng%3B%0A%20%20%20%20if%20%28out_of_china%28lng%2C%20lat%29%29%20%7B%0A%20%20%20%20%20%20return%20%5Blng%2C%20lat%5D%0A%20%20%20%20%7D%20else%20%7B%0A%20%20%20%20%20%20var%20dlat%20%3D%20transformlat%28lng%20-%20105.0%2C%20lat%20-%2035.0%29%3B%0A%20%20%20%20%20%20var%20dlng%20%3D%20transformlng%28lng%20-%20105.0%2C%20lat%20-%2035.0%29%3B%0A%20%20%20%20%20%20var%20radlat%20%3D%20lat%20/%20180.0%20*%20PI%3B%0A%20%20%20%20%20%20var%20magic%20%3D%20Math.sin%28radlat%29%3B%0A%20%20%20%20%20%20magic%20%3D%201%20-%20ee%20*%20magic%20*%20magic%3B%0A%20%20%20%20%20%20var%20sqrtmagic%20%3D%20Math.sqrt%28magic%29%3B%0A%20%20%20%20%20%20dlat%20%3D%20%28dlat%20*%20180.0%29%20/%20%28%28a%20*%20%281%20-%20ee%29%29%20/%20%28magic%20*%20sqrtmagic%29%20*%20PI%29%3B%0A%20%20%20%20%20%20dlng%20%3D%20%28dlng%20*%20180.0%29%20/%20%28a%20/%20sqrtmagic%20*%20Math.cos%28radlat%29%20*%20PI%29%3B%0A%20%20%20%20%20%20var%20mglat%20%3D%20lat%20+%20dlat%3B%0A%20%20%20%20%20%20var%20mglng%20%3D%20lng%20+%20dlng%3B%0A%20%20%20%20%20%20return%20%5Blng%20*%202%20-%20mglng%2C%20lat%20*%202%20-%20mglat%5D%0A%20%20%20%20%7D%0A%20%20%7D%3B%0A%0A%20%20var%20transformlat%20%3D%20function%20transformlat%28lng%2C%20lat%29%20%7B%0A%20%20%20%20var%20lat%20%3D%20+lat%3B%0A%20%20%20%20var%20lng%20%3D%20+lng%3B%0A%20%20%20%20var%20ret%20%3D%20-100.0%20+%202.0%20*%20lng%20+%203.0%20*%20lat%20+%200.2%20*%20lat%20*%20lat%20+%200.1%20*%20lng%20*%20lat%20+%200.2%20*%20Math.sqrt%28Math.abs%28lng%29%29%3B%0A%20%20%20%20ret%20+%3D%20%2820.0%20*%20Math.sin%286.0%20*%20lng%20*%20PI%29%20+%2020.0%20*%20Math.sin%282.0%20*%20lng%20*%20PI%29%29%20*%202.0%20/%203.0%3B%0A%20%20%20%20ret%20+%3D%20%2820.0%20*%20Math.sin%28lat%20*%20PI%29%20+%2040.0%20*%20Math.sin%28lat%20/%203.0%20*%20PI%29%29%20*%202.0%20/%203.0%3B%0A%20%20%20%20ret%20+%3D%20%28160.0%20*%20Math.sin%28lat%20/%2012.0%20*%20PI%29%20+%20320%20*%20Math.sin%28lat%20*%20PI%20/%2030.0%29%29%20*%202.0%20/%203.0%3B%0A%20%20%20%20return%20ret%0A%20%20%7D%3B%0A%0A%20%20var%20transformlng%20%3D%20function%20transformlng%28lng%2C%20lat%29%20%7B%0A%20%20%20%20var%20lat%20%3D%20+lat%3B%0A%20%20%20%20var%20lng%20%3D%20+lng%3B%0A%20%20%20%20var%20ret%20%3D%20300.0%20+%20lng%20+%202.0%20*%20lat%20+%200.1%20*%20lng%20*%20lng%20+%200.1%20*%20lng%20*%20lat%20+%200.1%20*%20Math.sqrt%28Math.abs%28lng%29%29%3B%0A%20%20%20%20ret%20+%3D%20%2820.0%20*%20Math.sin%286.0%20*%20lng%20*%20PI%29%20+%2020.0%20*%20Math.sin%282.0%20*%20lng%20*%20PI%29%29%20*%202.0%20/%203.0%3B%0A%20%20%20%20ret%20+%3D%20%2820.0%20*%20Math.sin%28lng%20*%20PI%29%20+%2040.0%20*%20Math.sin%28lng%20/%203.0%20*%20PI%29%29%20*%202.0%20/%203.0%3B%0A%20%20%20%20ret%20+%3D%20%28150.0%20*%20Math.sin%28lng%20/%2012.0%20*%20PI%29%20+%20300.0%20*%20Math.sin%28lng%20/%2030.0%20*%20PI%29%29%20*%202.0%20/%203.0%3B%0A%20%20%20%20return%20ret%0A%20%20%7D%3B%0A%0A%20%20/**%0A%20%20%20*%20%u5224%u65AD%u662F%u5426%u5728%u56FD%u5185%uFF0C%u4E0D%u5728%u56FD%u5185%u5219%u4E0D%u505A%u504F%u79FB%0A%20%20%20*%20@param%20lng%0A%20%20%20*%20@param%20lat%0A%20%20%20*%20@returns%20%7Bboolean%7D%0A%20%20%20*/%0A%20%20var%20out_of_china%20%3D%20function%20out_of_china%28lng%2C%20lat%29%20%7B%0A%20%20%20%20var%20lat%20%3D%20+lat%3B%0A%20%20%20%20var%20lng%20%3D%20+lng%3B%0A%20%20%20%20//%20%u7EAC%u5EA63.86%7E53.55%2C%u7ECF%u5EA673.66%7E135.05%20%0A%20%20%20%20return%20%21%28lng%20%3E%2073.66%20%26%26%20lng%20%3C%20135.05%20%26%26%20lat%20%3E%203.86%20%26%26%20lat%20%3C%2053.55%29%3B%0A%20%20%7D%3B%0A%0A%20%20return%20%7B%0A%20%20%20%20bd09togcj02%3A%20bd09togcj02%2C%0A%20%20%20%20gcj02tobd09%3A%20gcj02tobd09%2C%0A%20%20%20%20wgs84togcj02%3A%20wgs84togcj02%2C%0A%20%20%20%20gcj02towgs84%3A%20gcj02towgs84%0A%20%20%7D%0A%7D%29%29%3B%0A%20%20var%20x_PI%20%3D%203.14159265358979324%20*%203000.0%20/%20180.0%3B%0A%20%20var%20PI%20%3D%203.1415926535897932384626%3B%0A%20%20var%20a%20%3D%206378245.0%3B%0A%20%20var%20ee%20%3D%200.00669342162296594323%3B%0A%20%20/**%0A%20%20%20*%20%u767E%u5EA6%u5750%u6807%u7CFB%20%28BD-09%29%20%u4E0E%20%u706B%u661F%u5750%u6807%u7CFB%20%28GCJ-02%29%u7684%u8F6C%u6362%0A%20%20%20*%20%u5373%20%u767E%u5EA6%20%u8F6C%20%u8C37%u6B4C%u3001%u9AD8%u5FB7%0A%20%20%20*%20@param%20bd_lon%0A%20%20%20*%20@param%20bd_lat%0A%20%20%20*%20@returns%20%7B*%5B%5D%7D%0A%20%20%20*/%0A%20%20var%20bd09togcj02%20%3D%20function%20bd09togcj02%28bd_lon%2C%20bd_lat%29%20%7B%0A%20%20%20%20var%20bd_lon%20%3D%20+bd_lon%3B%0A%20%20%20%20var%20bd_lat%20%3D%20+bd_lat%3B%0A%20%20%20%20var%20x%20%3D%20bd_lon%20-%200.0065%3B%0A%20%20%20%20var%20y%20%3D%20bd_lat%20-%200.006%3B%0A%20%20%20%20var%20z%20%3D%20Math.sqrt%28x%20*%20x%20+%20y%20*%20y%29%20-%200.00002%20*%20Math.sin%28y%20*%20x_PI%29%3B%0A%20%20%20%20var%20theta%20%3D%20Math.atan2%28y%2C%20x%29%20-%200.000003%20*%20Math.cos%28x%20*%20x_PI%29%3B%0A%20%20%20%20var%20gg_lng%20%3D%20z%20*%20Math.cos%28theta%29%3B%0A%20%20%20%20var%20gg_lat%20%3D%20z%20*%20Math.sin%28theta%29%3B%0A%20%20%20%20return%20%5Bgg_lng%2C%20gg_lat%5D%0A%20%20%7D%3B%0A%0A%20%20/**%0A%20%20%20*%20%u706B%u661F%u5750%u6807%u7CFB%20%28GCJ-02%29%20%u4E0E%u767E%u5EA6%u5750%u6807%u7CFB%20%28BD-09%29%20%u7684%u8F6C%u6362%0A%20%20%20*%20%u5373%u8C37%u6B4C%u3001%u9AD8%u5FB7%20%u8F6C%20%u767E%u5EA6%0A%20%20%20*%20@param%20lng%0A%20%20%20*%20@param%20lat%0A%20%20%20*%20@returns%20%7B*%5B%5D%7D%0A%20%20%20*/%0A%20%20var%20gcj02tobd09%20%3D%20function%20gcj02tobd09%28lng%2C%20lat%29%20%7B%0A%20%20%20%20var%20lat%20%3D%20+lat%3B%0A%20%20%20%20var%20lng%20%3D%20+lng%3B%0A%20%20%20%20var%20z%20%3D%20Math.sqrt%28lng%20*%20lng%20+%20lat%20*%20lat%29%20+%200.00002%20*%20Math.sin%28lat%20*%20x_PI%29%3B%0A%20%20%20%20var%20theta%20%3D%20Math.atan2%28lat%2C%20lng%29%20+%200.000003%20*%20Math.cos%28lng%20*%20x_PI%29%3B%0A%20%20%20%20var%20bd_lng%20%3D%20z%20*%20Math.cos%28theta%29%20+%200.0065%3B%0A%20%20%20%20var%20bd_lat%20%3D%20z%20*%20Math.sin%28theta%29%20+%200.006%3B%0A%20%20%20%20return%20%5Bbd_lng%2C%20bd_lat%5D%0A%20%20%7D%3B%0A%0A%20%20/**%0A%20%20%20*%20WGS84%u8F6CGCj02%0A%20%20%20*%20@param%20lng%0A%20%20%20*%20@param%20lat%0A%20%20%20*%20@returns%20%7B*%5B%5D%7D%0A%20%20%20*/%0A%20%20var%20wgs84togcj02%20%3D%20function%20wgs84togcj02%28lng%2C%20lat%29%20%7B%0A%20%20%20%20var%20lat%20%3D%20+lat%3B%0A%20%20%20%20var%20lng%20%3D%20+lng%3B%0A%20%20%20%20if%20%28out_of_china%28lng%2C%20lat%29%29%20%7B%0A%20%20%20%20%20%20return%20%5Blng%2C%20lat%5D%0A%20%20%20%20%7D%20else%20%7B%0A%20%20%20%20%20%20var%20dlat%20%3D%20transformlat%28lng%20-%20105.0%2C%20lat%20-%2035.0%29%3B%0A%20%20%20%20%20%20var%20dlng%20%3D%20transformlng%28lng%20-%20105.0%2C%20lat%20-%2035.0%29%3B%0A%20%20%20%20%20%20var%20radlat%20%3D%20lat%20/%20180.0%20*%20PI%3B%0A%20%20%20%20%20%20var%20magic%20%3D%20Math.sin%28radlat%29%3B%0A%20%20%20%20%20%20magic%20%3D%201%20-%20ee%20*%20magic%20*%20magic%3B%0A%20%20%20%20%20%20var%20sqrtmagic%20%3D%20Math.sqrt%28magic%29%3B%0A%20%20%20%20%20%20dlat%20%3D%20%28dlat%20*%20180.0%29%20/%20%28%28a%20*%20%281%20-%20ee%29%29%20/%20%28magic%20*%20sqrtmagic%29%20*%20PI%29%3B%0A%20%20%20%20%20%20dlng%20%3D%20%28dlng%20*%20180.0%29%20/%20%28a%20/%20sqrtmagic%20*%20Math.cos%28radlat%29%20*%20PI%29%3B%0A%20%20%20%20%20%20var%20mglat%20%3D%20lat%20+%20dlat%3B%0A%20%20%20%20%20%20var%20mglng%20%3D%20lng%20+%20dlng%3B%0A%20%20%20%20%20%20return%20%5Bmglng%2C%20mglat%5D%0A%20%20%20%20%7D%0A%20%20%7D%3B%0A%0A%20%20/**%0A%20%20%20*%20GCJ02%20%u8F6C%u6362%u4E3A%20WGS84%0A%20%20%20*%20@param%20lng%0A%20%20%20*%20@param%20lat%0A%20%20%20*%20@returns%20%7B*%5B%5D%7D%0A%20%20%20*/%0A%20%20var%20gcj02towgs84%20%3D%20function%20gcj02towgs84%28lng%2C%20lat%29%20%7B%0A%20%20%20%20var%20lat%20%3D%20+lat%3B%0A%20%20%20%20var%20lng%20%3D%20+lng%3B%0A%20%20%20%20if%20%28out_of_china%28lng%2C%20lat%29%29%20%7B%0A%20%20%20%20%20%20return%20%5Blng%2C%20lat%5D%0A%20%20%20%20%7D%20else%20%7B%0A%20%20%20%20%20%20var%20dlat%20%3D%20transformlat%28lng%20-%20105.0%2C%20lat%20-%2035.0%29%3B%0A%20%20%20%20%20%20var%20dlng%20%3D%20transformlng%28lng%20-%20105.0%2C%20lat%20-%2035.0%29%3B%0A%20%20%20%20%20%20var%20radlat%20%3D%20lat%20/%20180.0%20*%20PI%3B%0A%20%20%20%20%20%20var%20magic%20%3D%20Math.sin%28radlat%29%3B%0A%20%20%20%20%20%20magic%20%3D%201%20-%20ee%20*%20magic%20*%20magic%3B%0A%20%20%20%20%20%20var%20sqrtmagic%20%3D%20Math.sqrt%28magic%29%3B%0A%20%20%20%20%20%20dlat%20%3D%20%28dlat%20*%20180.0%29%20/%20%28%28a%20*%20%281%20-%20ee%29%29%20/%20%28magic%20*%20sqrtmagic%29%20*%20PI%29%3B%0A%20%20%20%20%20%20dlng%20%3D%20%28dlng%20*%20180.0%29%20/%20%28a%20/%20sqrtmagic%20*%20Math.cos%28radlat%29%20*%20PI%29%3B%0A%20%20%20%20%20%20var%20mglat%20%3D%20lat%20+%20dlat%3B%0A%20%20%20%20%20%20var%20mglng%20%3D%20lng%20+%20dlng%3B%0A%20%20%20%20%20%20return%20%5Blng%20*%202%20-%20mglng%2C%20lat%20*%202%20-%20mglat%5D%0A%20%20%20%20%7D%0A%20%20%7D%3B%0A%0A%20%20var%20transformlat%20%3D%20function%20transformlat%28lng%2C%20lat%29%20%7B%0A%20%20%20%20var%20lat%20%3D%20+lat%3B%0A%20%20%20%20var%20lng%20%3D%20+lng%3B%0A%20%20%20%20var%20ret%20%3D%20-100.0%20+%202.0%20*%20lng%20+%203.0%20*%20lat%20+%200.2%20*%20lat%20*%20lat%20+%200.1%20*%20lng%20*%20lat%20+%200.2%20*%20Math.sqrt%28Math.abs%28lng%29%29%3B%0A%20%20%20%20ret%20+%3D%20%2820.0%20*%20Math.sin%286.0%20*%20lng%20*%20PI%29%20+%2020.0%20*%20Math.sin%282.0%20*%20lng%20*%20PI%29%29%20*%202.0%20/%203.0%3B%0A%20%20%20%20ret%20+%3D%20%2820.0%20*%20Math.sin%28lat%20*%20PI%29%20+%2040.0%20*%20Math.sin%28lat%20/%203.0%20*%20PI%29%29%20*%202.0%20/%203.0%3B%0A%20%20%20%20ret%20+%3D%20%28160.0%20*%20Math.sin%28lat%20/%2012.0%20*%20PI%29%20+%20320%20*%20Math.sin%28lat%20*%20PI%20/%2030.0%29%29%20*%202.0%20/%203.0%3B%0A%20%20%20%20return%20ret%0A%20%20%7D%3B%0A%0A%20%20var%20transformlng%20%3D%20function%20transformlng%28lng%2C%20lat%29%20%7B%0A%20%20%20%20var%20lat%20%3D%20+lat%3B%0A%20%20%20%20var%20lng%20%3D%20+lng%3B%0A%20%20%20%20var%20ret%20%3D%20300.0%20+%20lng%20+%202.0%20*%20lat%20+%200.1%20*%20lng%20*%20lng%20+%200.1%20*%20lng%20*%20lat%20+%200.1%20*%20Math.sqrt%28Math.abs%28lng%29%29%3B%0A%20%20%20%20ret%20+%3D%20%2820.0%20*%20Math.sin%286.0%20*%20lng%20*%20PI%29%20+%2020.0%20*%20Math.sin%282.0%20*%20lng%20*%20PI%29%29%20*%202.0%20/%203.0%3B%0A%20%20%20%20ret%20+%3D%20%2820.0%20*%20Math.sin%28lng%20*%20PI%29%20+%2040.0%20*%20Math.sin%28lng%20/%203.0%20*%20PI%29%29%20*%202.0%20/%203.0%3B%0A%20%20%20%20ret%20+%3D%20%28150.0%20*%20Math.sin%28lng%20/%2012.0%20*%20PI%29%20+%20300.0%20*%20Math.sin%28lng%20/%2030.0%20*%20PI%29%29%20*%202.0%20/%203.0%3B%0A%20%20%20%20return%20ret%0A%20%20%7D%3B%0A%0A%20%20/**%0A%20%20%20*%20%u5224%u65AD%u662F%u5426%u5728%u56FD%u5185%uFF0C%u4E0D%u5728%u56FD%u5185%u5219%u4E0D%u505A%u504F%u79FB%0A%20%20%20*%20@param%20lng%0A%20%20%20*%20@param%20lat%0A%20%20%20*%20@returns%20%7Bboolean%7D%0A%20%20%20*/%0A%20%20var%20out_of_china%20%3D%20function%20out_of_china%28lng%2C%20lat%29%20%7B%0A%20%20%20%20var%20lat%20%3D%20+lat%3B%0A%20%20%20%20var%20lng%20%3D%20+lng%3B%0A%20%20%20%20//%20%u7EAC%u5EA63.86%7E53.55%2C%u7ECF%u5EA673.66%7E135.05%20%0A%20%20%20%20return%20%21%28lng%20%3E%2073.66%20%26%26%20lng%20%3C%20135.05%20%26%26%20lat%20%3E%203.86%20%26%26%20lat%20%3C%2053.55%29%3B%0A%20%20%7D%3B%0A%3C/script%3E